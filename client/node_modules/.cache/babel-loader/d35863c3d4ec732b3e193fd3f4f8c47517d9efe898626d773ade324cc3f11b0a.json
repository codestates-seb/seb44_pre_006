{"ast":null,"code":"import _regeneratorRuntime from\"/Users/jiinpark/seb44_pre_006/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/jiinpark/seb44_pre_006/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _taggedTemplateLiteral from\"/Users/jiinpark/seb44_pre_006/client/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2,_templateObject3;import{styled}from\"styled-components\";import logoIcon from'../asset/logo-icon.png';import{Link,useNavigate}from\"react-router-dom\";import GoogleButton from\"./GoogleButton\";import{useRef}from'react';import axios from\"axios\";import{useDispatch}from\"react-redux\";import{fetchUser}from'../api/getUser';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var LoginContainer=styled.section(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\nwidth: 400px;\\nheight: 500px;\\ndisplay: flex;\\njustify-content: space-around;\\nalign-items: center;\\nflex-direction: column;\\n> img {\\n    width: 40px\\n}\\n\"])));export var LoginForm=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\nheight: auto;\\npadding: 20px;\\ndisplay: flex;\\nflex-direction: column;\\njustify-content: space-around;\\nbox-shadow: 0px 4px 4px rgba(0, 0, 0, 0.4);\\nborder-radius: 5px;\\nborder: 1px solid var(--silver-lighter);\\n> button {\\n    width: 300px;\\n    height: 40px;\\n    background-color: var(--blue-500);\\n    color: white;\\n    font-size: 100%;\\n    border: 1px solid var(--silver-lighter);\\n    border-radius: 5px;\\n    margin-top: 20px;\\n}\\n\"])));export var LoginInputForm=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\ndisplay: flex;\\nflex-direction: column;\\nmargin-top: 10px;\\n> input {\\n    width: 300px;\\n    height: 40px;\\n    border-radius: 5px;\\n    border: 1px solid var(--silver-lighter);\\n}\\n> h3 {\\n    margin: 0;\\n}\\n\"])));function Login(){var dispatch=useDispatch();var navigate=useNavigate();var nameRef=useRef(null);var passwordRef=useRef(null);var onLogInHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var name,password;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:name=nameRef.current.value;password=passwordRef.current.value;_context.next=4;return axios.post('/users/login',{password:password,username:name}).then(function(response){console.log(response);localStorage.setItem(\"jwtToken\",response.headers.authorization);localStorage.setItem(\"refreshToken\",response.headers.refresh);dispatch(fetchUser(response.data.memberId));localStorage.setItem(\"memberId\",response.data.memberId);navigate('/home');}).catch(function(err){console.log(err);});case 4:case\"end\":return _context.stop();}},_callee);}));return function onLogInHandler(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(LoginContainer,{className:\"LoginContainer\",children:[/*#__PURE__*/_jsx(\"img\",{src:logoIcon,alt:\"logoIcon\"}),/*#__PURE__*/_jsx(GoogleButton,{}),/*#__PURE__*/_jsxs(LoginForm,{children:[/*#__PURE__*/_jsxs(LoginInputForm,{className:\"LoginInputForm\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{ref:nameRef,id:\"nameRef\"})]}),/*#__PURE__*/_jsxs(LoginInputForm,{className:\"LoginInputForm\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{ref:passwordRef,id:\"passwordRef\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return onLogInHandler();},children:\"Log in\"})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Don\\u2019t have an account? \\xA0\",/*#__PURE__*/_jsx(Link,{to:\"/users/sighup\",children:\"Sign up\"})]})]});}export default Login;","map":{"version":3,"names":["styled","logoIcon","Link","useNavigate","GoogleButton","useRef","axios","useDispatch","fetchUser","jsx","_jsx","jsxs","_jsxs","LoginContainer","section","_templateObject","_taggedTemplateLiteral","LoginForm","div","_templateObject2","LoginInputForm","_templateObject3","Login","dispatch","navigate","nameRef","passwordRef","onLogInHandler","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","name","password","wrap","_callee$","_context","prev","next","current","value","post","username","then","response","console","log","localStorage","setItem","headers","authorization","refresh","data","memberId","catch","err","stop","apply","arguments","className","children","src","alt","ref","id","onClick","to"],"sources":["/Users/jiinpark/seb44_pre_006/client/src/component/Login.js"],"sourcesContent":["import { styled } from \"styled-components\";\nimport logoIcon from '../asset/logo-icon.png'\nimport { Link , useNavigate} from \"react-router-dom\";\nimport GoogleButton from \"./GoogleButton\";\nimport { useRef } from 'react';\nimport axios from \"axios\";\nimport { useDispatch } from \"react-redux\";\nimport {fetchUser} from '../api/getUser'\n\n\nexport const LoginContainer = styled.section`\nwidth: 400px;\nheight: 500px;\ndisplay: flex;\njustify-content: space-around;\nalign-items: center;\nflex-direction: column;\n> img {\n    width: 40px\n}\n`\nexport const LoginForm = styled.div`\nheight: auto;\npadding: 20px;\ndisplay: flex;\nflex-direction: column;\njustify-content: space-around;\nbox-shadow: 0px 4px 4px rgba(0, 0, 0, 0.4);\nborder-radius: 5px;\nborder: 1px solid var(--silver-lighter);\n> button {\n    width: 300px;\n    height: 40px;\n    background-color: var(--blue-500);\n    color: white;\n    font-size: 100%;\n    border: 1px solid var(--silver-lighter);\n    border-radius: 5px;\n    margin-top: 20px;\n}\n`\nexport const LoginInputForm = styled.div`\ndisplay: flex;\nflex-direction: column;\nmargin-top: 10px;\n> input {\n    width: 300px;\n    height: 40px;\n    border-radius: 5px;\n    border: 1px solid var(--silver-lighter);\n}\n> h3 {\n    margin: 0;\n}\n`\n\nfunction Login () {\n\n    const dispatch = useDispatch()\n    const navigate = useNavigate();\n    const nameRef = useRef(null);\n    const passwordRef = useRef(null);\n    \n\n    const onLogInHandler = async () => {\n        const name = nameRef.current.value;\n        const password = passwordRef.current.value;\n\n        await axios\n            .post('/users/login', {  password: password, username: name })\n            .then(response => {\n                console.log(response);\n                localStorage.setItem(\"jwtToken\", response.headers.authorization);\n                localStorage.setItem(\"refreshToken\", response.headers.refresh);\n                dispatch(fetchUser(response.data.memberId))\n                localStorage.setItem(\"memberId\", response.data.memberId)\n                navigate('/home')\n            })\n            .catch(err => {\n                console.log(err);\n            });\n    }\n    return(\n        <LoginContainer className=\"LoginContainer\">\n            <img src={logoIcon} alt='logoIcon'/>\n            <GoogleButton/>\n            <LoginForm>\n                <LoginInputForm className=\"LoginInputForm\">\n                    <h3>Email</h3>\n                    <input ref={nameRef} id='nameRef'/>\n                </LoginInputForm>\n                <LoginInputForm className=\"LoginInputForm\">\n                    <h3>Password</h3>\n                    <input ref={passwordRef} id=\"passwordRef\"/>\n                </LoginInputForm>\n                <button onClick={() => onLogInHandler()}>Log in</button>\n            </LoginForm>\n            <p>\n                Donâ€™t have an account? &nbsp; \n                <Link to='/users/sighup'>Sign up</Link>\n            </p>\n        </LoginContainer>\n    )\n}\n\nexport default Login;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
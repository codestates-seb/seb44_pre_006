{"ast":null,"code":"import _regeneratorRuntime from\"/Users/jiinpark/seb44_pre_006/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/jiinpark/seb44_pre_006/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/jiinpark/seb44_pre_006/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _taggedTemplateLiteral from\"/Users/jiinpark/seb44_pre_006/client/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2,_templateObject3,_templateObject4;import{useState}from'react';import{styled}from'styled-components';import{useNavigate}from'react-router';import{useDispatch,useSelector}from'react-redux';import SideBar from'../component/SideBar';import ProfileCartegory from'../component/user/ProfileCategory';import{fetchDeleteUser}from'../api/deleteUser';import{resetUser}from'../store/userSlice';import ProfileHeader from'../component/user/ProfileHeader';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var DelePageContainer=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  max-width: 1264px;\\n  display: flex;\\n  justify-content: center;\\n\"])));var DeleContainer=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  max-width: 1100px;\\n  width: 100%;\\n  margin: 30px;\\n\"])));var DeleBoxContainer=styled.section(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  > div {\\n    width: 70%;\\n    margin-bottom: 24px;\\n    padding: 24px;\\n    border-radius: 3px;\\n    border-top: 1px solid var(--black-200);\\n\\n    > p {\\n      margin: 0;\\n      font-style: 15px;\\n      margin-bottom: 15px;\\n    }\\n\\n    > p:last-child {\\n      margin: 0;\\n      > ul {\\n        margin-left: 15px;\\n        > li {\\n          font-size: 13px;\\n          line-height: 1.3;\\n          list-style-type: disc;\\n          list-style-position: inside;\\n        }\\n      }\\n    }\\n  }\\n\"])));var DeleteBtn=styled.button(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  margin: 4px;\\n  padding: 10px;\\n  border: 1px solid var(--red-700);\\n  border-radius: 3px;\\n  color: #fff;\\n  background-color: var(--red-600);\\n  cursor: pointer;\\n\\n  &:disabled {\\n    opacity: 0.5;\\n    cursor: not-allowed;\\n  }\\n\\n  &:hover {\\n    &:disabled {\\n      background-color: var(--red-700);\\n    }\\n  }\\n\"])));function DeleteProfile(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isChecked=_useState2[0],setIsChecked=_useState2[1];var path=window.location.pathname;var memberId=path.slice(path.lastIndexOf(\"/\")+1);var dispatch=useDispatch();var navigate=useNavigate();var admin=useSelector(function(state){return state.user.data.admin;});var handleCheckBoxChange=function handleCheckBoxChange(){setIsChecked(!isChecked);};var handleDeleteProfile=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return dispatch(fetchDeleteUser({memberId:memberId})).then(function(){if(!admin){localStorage.removeItem('jwtToken');localStorage.removeItem('refreshToken');localStorage.removeItem('memberId');dispatch(resetUser());}navigate('/');}).catch(function(error){console.log(error);});case 2:case\"end\":return _context.stop();}},_callee);}));return function handleDeleteProfile(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(DelePageContainer,{children:[/*#__PURE__*/_jsx(SideBar,{}),/*#__PURE__*/_jsxs(DeleContainer,{children:[/*#__PURE__*/_jsx(ProfileHeader,{}),/*#__PURE__*/_jsx(ProfileCartegory,{text:\"Settings\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"Delete Profile\"}),/*#__PURE__*/_jsxs(DeleBoxContainer,{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{children:\"Before confirming that you would like your profile deleted, we'd like to take a moment to explain the implications of deletion:\"}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:\"Deletion is irreversible, and you will have no way to regain any of your original content, should this deletion be carried out and you change your mind later on.\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Your questions and answers will remain on the site, but will be disassociated and anonymized (the author will be listed as \\\"user22064595\\\") and will not indicate your authorship even if you later return to the site.\"})]})}),/*#__PURE__*/_jsx(\"p\",{children:\"Confirming deletion will only delete your profile on Stack Overflow - it will not affect any of your other profiles on the Stack Exchange network. If you want to delete multiple profiles, you'll need to visit each site separately and request deletion of those individual profiles.\"}),/*#__PURE__*/_jsxs(\"label\",{className:\"checkinput\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",onChange:handleCheckBoxChange}),\"I have read the information stated above and understand the implications of having my profile deleted. I wish to proceed with the deletion of my profile.\"]})]}),/*#__PURE__*/_jsx(DeleteBtn,{disabled:!isChecked,onClick:function onClick(){return handleDeleteProfile();},children:\"Delete Profile\"})]})]})]});}export default DeleteProfile;","map":{"version":3,"names":["useState","styled","useNavigate","useDispatch","useSelector","SideBar","ProfileCartegory","fetchDeleteUser","resetUser","ProfileHeader","jsx","_jsx","jsxs","_jsxs","DelePageContainer","div","_templateObject","_taggedTemplateLiteral","DeleContainer","_templateObject2","DeleBoxContainer","section","_templateObject3","DeleteBtn","button","_templateObject4","DeleteProfile","_useState","_useState2","_slicedToArray","isChecked","setIsChecked","path","window","location","pathname","memberId","slice","lastIndexOf","dispatch","navigate","admin","state","user","data","handleCheckBoxChange","handleDeleteProfile","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","then","localStorage","removeItem","catch","error","console","log","stop","apply","arguments","children","text","className","type","onChange","disabled","onClick"],"sources":["/Users/jiinpark/seb44_pre_006/client/src/page/DeleteProfile.jsx"],"sourcesContent":["import { useState } from 'react';\nimport { styled } from 'styled-components';\nimport { useNavigate } from 'react-router';\nimport { useDispatch, useSelector } from 'react-redux';\nimport SideBar from '../component/SideBar';\nimport ProfileCartegory from '../component/user/ProfileCategory';\nimport { fetchDeleteUser } from '../api/deleteUser';\nimport { resetUser } from '../store/userSlice';\nimport ProfileHeader from '../component/user/ProfileHeader';\n\nconst DelePageContainer = styled.div`\n  max-width: 1264px;\n  display: flex;\n  justify-content: center;\n`;\n\nconst DeleContainer = styled.div`\n  max-width: 1100px;\n  width: 100%;\n  margin: 30px;\n`;\n\nconst DeleBoxContainer = styled.section`\n  > div {\n    width: 70%;\n    margin-bottom: 24px;\n    padding: 24px;\n    border-radius: 3px;\n    border-top: 1px solid var(--black-200);\n\n    > p {\n      margin: 0;\n      font-style: 15px;\n      margin-bottom: 15px;\n    }\n\n    > p:last-child {\n      margin: 0;\n      > ul {\n        margin-left: 15px;\n        > li {\n          font-size: 13px;\n          line-height: 1.3;\n          list-style-type: disc;\n          list-style-position: inside;\n        }\n      }\n    }\n  }\n`;\n\nconst DeleteBtn = styled.button`\n  margin: 4px;\n  padding: 10px;\n  border: 1px solid var(--red-700);\n  border-radius: 3px;\n  color: #fff;\n  background-color: var(--red-600);\n  cursor: pointer;\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n\n  &:hover {\n    &:disabled {\n      background-color: var(--red-700);\n    }\n  }\n`;\n\nfunction DeleteProfile() {\n  const [isChecked, setIsChecked] = useState(false);\n  const path = window.location.pathname;\n  const memberId = path.slice(path.lastIndexOf(\"/\") + 1);\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  const admin = useSelector(state => state.user.data.admin)\n\n  const handleCheckBoxChange = () => {\n    setIsChecked(!isChecked);\n  };\n\n  const handleDeleteProfile = async () => {\n    await dispatch(fetchDeleteUser({ memberId }))\n    .then(() => {\n      if(!admin){\n        localStorage.removeItem('jwtToken');\n        localStorage.removeItem('refreshToken');\n        localStorage.removeItem('memberId');\n        dispatch(resetUser());\n      }\n      navigate('/');\n    })\n    .catch((error) => {\n      console.log(error);\n    })\n  };\n\n  return (\n    <DelePageContainer>\n      <SideBar />\n      <DeleContainer>\n        <ProfileHeader />\n        <ProfileCartegory text={`Settings`} />\n        <h2>Delete Profile</h2>\n        <DeleBoxContainer>\n          <div>\n            <p>\n              Before confirming that you would like your profile deleted, we'd\n              like to take a moment to explain the implications of deletion:\n            </p>\n            <p>\n              <ul>\n                <li>\n                  Deletion is irreversible, and you will have no way to regain\n                  any of your original content, should this deletion be carried\n                  out and you change your mind later on.\n                </li>\n                <li>\n                  Your questions and answers will remain on the site, but will\n                  be disassociated and anonymized (the author will be listed as\n                  \"user22064595\") and will not indicate your authorship even if\n                  you later return to the site.\n                </li>\n              </ul>\n            </p>\n            <p>\n              Confirming deletion will only delete your profile on Stack\n              Overflow - it will not affect any of your other profiles on the\n              Stack Exchange network. If you want to delete multiple profiles,\n              you'll need to visit each site separately and request deletion of\n              those individual profiles.\n            </p>\n            <label className=\"checkinput\">\n              <input type=\"checkbox\" onChange={handleCheckBoxChange} />I have\n              read the information stated above and understand the implications\n              of having my profile deleted. I wish to proceed with the deletion\n              of my profile.\n            </label>\n          </div>\n          <DeleteBtn disabled={!isChecked} onClick={() => handleDeleteProfile()}>\n            Delete Profile\n          </DeleteBtn>\n        </DeleBoxContainer>\n      </DeleContainer>\n    </DelePageContainer>\n  );\n}\n\nexport default DeleteProfile;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}